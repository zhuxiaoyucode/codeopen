1. 项目概述
1.1 项目名称
在线代码片段共享平台（暂定名：CodeShare）
1.2 项目定位
一款轻量级在线代码片段分享工具，支持代码语法高亮、自定义过期时间与访问权限，用户可通过唯一链接快速分享代码片段，同时提供个人片段管理功能，类似简化版 Pastebin 或 CodePen。
1.3 核心价值
为开发者提供便捷的代码片段临时存储与分享渠道
支持多语言语法高亮，提升代码可读性
灵活的权限与过期设置，满足不同场景需求（如临时调试、技术交流等）
无需登录即可查看公开内容，降低使用门槛
2. 功能需求
2.1 公共功能（无需登录）
2.1.1 代码片段创建
支持在线编辑代码（文本输入框，支持换行、基本编辑操作）
语言选择：提供多语言选项（如 JavaScript、Python、Java、Go 等），用于语法高亮匹配
过期时间设置：可选 1 天、1 周、永久
访问权限设置：公开（任何人可通过链接访问）/ 私密（仅创建者可通过链接访问）
创建提交：生成唯一访问链接，支持一键复制链接
2.1.2 代码片段查看
通过唯一 URL 访问代码片段详情页
自动根据语言类型加载语法高亮样式
显示片段基本信息：创建时间、语言类型、过期状态（如已过期则提示）
支持代码复制功能（一键复制完整代码）
公开片段支持正常访问，私密片段仅创建者（登录状态）可访问
2.1.3 链接有效性校验
访问已过期的片段时，提示 “片段已过期”
访问不存在的片段时，提示 “片段不存在”
2.2 用户中心功能（需登录）
2.2.1 用户认证
支持注册（用户名、密码、邮箱）、登录（账号密码）功能
登录状态保持（会话管理）
退出登录功能
2.2.2 个人片段管理
展示当前用户创建的所有片段列表（包括公开 / 私密）
列表信息：片段标题（可选，默认生成）、语言类型、创建时间、过期时间、访问权限
操作功能：
查看：点击跳转至片段详情页
编辑：修改代码内容、语言类型、过期时间、访问权限
删除：移除指定片段
分享：重新生成 / 复制访问链接
2.3 系统功能
2.3.1 片段存储与清理
自动存储用户创建的片段数据
定期清理已过期的非永久片段（按过期时间自动删除）
2.3.2 唯一链接生成
为每个片段生成唯一标识符（短哈希 / 随机字符串），作为 URL 路径（如/s/abc123）
3. 非功能需求
3.1 性能需求
页面加载时间：首次加载≤3 秒，二次加载≤1 秒
代码片段提交响应时间：≤500ms
支持同时在线用户数：≥1000 人
3.2 兼容性需求
前端支持主流浏览器：Chrome、Firefox、Safari、Edge（最新 3 个版本）
响应式设计：适配 PC 端（≥1280px）、平板（768px-1279px）、移动端（≤767px）
3.3 安全性需求
密码加密存储（如使用 bcrypt 算法）
私密片段访问权限校验（非创建者访问时拒绝）
防止 XSS 攻击（对用户输入的代码片段进行转义处理）
防止 SQL 注入（数据库操作参数化）
3.4 可用性需求
界面简洁直观，操作流程清晰（创建片段步骤≤3 步）
错误提示明确（如 “链接无效”“权限不足” 等）
支持离线编辑草稿（可选，使用 localStorage 暂存）
4. 技术实现规划
4.1 前端技术栈
框架：React
代码高亮：Prism.js（支持多语言，轻量易集成）
路由：React Router（管理页面跳转）
状态管理：Context API（简单场景）或 Redux（复杂状态）
UI 组件：可选用 Ant Design 或 Tailwind CSS（快速构建界面）
4.2 后端技术栈
语言：Node.js（搭配 Express 框架）
数据库：MongoDB（适合存储非结构化代码片段数据，支持灵活的字段扩展）
身份认证：JWT（JSON Web Token）
唯一 ID 生成：nanoid（生成短且唯一的字符串作为片段标识符）
4.3 数据模型设计（示例）
4.3.1 用户表（Users）
json
{
  "id": "用户唯一标识（ObjectId）",
  "username": "用户名（字符串，唯一）",
  "password": "加密后的密码（字符串）",
  "email": "邮箱（字符串，唯一）",
  "createdAt": "注册时间（时间戳）"
}
4.3.2 代码片段表（Snippets）
json
{
  "id": "片段唯一标识（字符串，短哈希）",
  "content": "代码内容（字符串）",
  "language": "语言类型（字符串，如javascript、python）",
  "expiresAt": "过期时间（时间戳，永久为null）",
  "isPrivate": "是否私密（布尔值，true/false）",
  "creatorId": "创建者ID（关联Users表，未登录用户为null）",
  "createdAt": "创建时间（时间戳）"
}
5. 可选扩展功能（挑战项）
5.1 代码运行器
后端集成沙盒环境（如 Docker 容器），支持指定语言代码的在线运行
限制运行时长（如≤5 秒）和资源占用（防止恶意代码）
前端显示运行结果（输出日志 / 错误信息）
5.2 高级编辑功能
代码自动补全
行号显示、代码折叠
主题切换（亮色 / 暗色模式）
5.3 片段版本管理
保存用户编辑历史，支持查看 / 回滚至历史版本
6. 项目优先级
核心功能（创建、查看、用户管理）为高优先级，确保可用
非功能需求（性能、兼容性）为中优先级，保障基本体验
扩展功能为低优先级，可在核心功能完成后迭代开发